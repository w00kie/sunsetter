{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./static/src/app.ts","webpack:///./static/src/tools.ts","webpack:///./node_modules/spin.js/spin.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","tokyo","google","maps","LatLng","window","onload","map","Map","document","getElementById","center","zoom","mapTypeId","MapTypeId","ROADMAP","markerpos","povmarker","Marker","position","icon","povicon","draggable","visible","poimarker","los","Polyline","path","getPosition","strokeColor","strokeOpacity","strokeWeight","setMap","resultsDOM","azimuthDOM","event","addListener","getVisible","setPosition","latLng","setVisible","style","display","tools","queryMatch","classList","remove","add","marker","addDomListener","setPath","az","getAzimuth","innerText","round","innerHTML","addEventListener","location","hash","getHash","pov","poi","povpos","strToLatLng","poipos","bounds","LatLngBounds","extend","fitBounds","askGeolocation","povLat","lat","toRad","poiLat","dLon","lng","y","Math","sin","cos","x","atan2","toBrng","setHash","toUrlValue","navigator","geolocation","getCurrentPosition","latlng","coords","latitude","longitude","panTo","parser","URLSearchParams","substring","str","coord","split","spinner","Spinner","lines","length","width","radius","rotate","color","speed","shadow","className","zIndex","top","left","spin","_gaq","push","povlat","results","fetch","method","headers","body","JSON","stringify","then","response","json","data","matches","daylist","createElement","day","dayli","append","suntype","appendChild","stop","catch","error","Number","this","PI","toDeg","decimals","pow","__assign","assign","arguments","apply","defaults","scale","corners","fadeColor","animation","direction","opts","target","el","setAttribute","css","transform","insertBefore","firstChild","borderRadius","shadows","boxShadow","regex","_i","_a","match","xUnits","yUnits","prefix","end","parseBoxShadow","degrees","backgroundLine","height","background","getColor","transformOrigin","delay","line","normalizeShadow","drawLines","requestAnimationFrame","cancelAnimationFrame","animateId","clearTimeout","parentNode","removeChild","undefined","props","prop","idx","normalized","shadows_1","xy","convertOffset","join","radians"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import * as tools from './tools'\n\n// povicon url from index.html\ndeclare const povicon: string\n\nconst tokyo = new google.maps.LatLng(35.41, 139.44)\n\nwindow.onload = () => {\n    // Create map\n\n    const map = new google.maps.Map(document.getElementById(\"map_canvas\") as HTMLElement, {\n        center: tokyo,\n        zoom: 9,\n        mapTypeId: google.maps.MapTypeId.ROADMAP\n    })\n\n    // Default marker position\n    const markerpos = new google.maps.LatLng(1, 1)\n\n    // Initialize POV and POI Markers as well as LOS Polyline\n    const povmarker = new google.maps.Marker({\n        position: markerpos,\n        map: map,\n        icon: povicon,\n        draggable: true,\n        visible: false\n    })\n\n    const poimarker = new google.maps.Marker({\n        position: markerpos,\n        map: map,\n        draggable: true,\n        visible: false\n    })\n\n    const los = new google.maps.Polyline({\n        path: [\n            povmarker.getPosition(),\n            poimarker.getPosition()\n        ],\n        strokeColor: \"#FF0000\",\n        strokeOpacity: 0.6,\n        strokeWeight: 6,\n        visible: false\n    })\n\n    los.setMap(map)\n\n    const resultsDOM = document.getElementById('results')\n    const azimuthDOM = document.getElementById('azimuth')\n\n    // Click on the map event - works only 2 first times\n    google.maps.event.addListener(map, 'click', (event) => {\n        // First click, show POV marker\n        if (!povmarker.getVisible()) {\n            povmarker.setPosition(event.latLng)\n            povmarker.setVisible(true)\n            document.getElementById(\"step1\").classList.remove(\"active\")\n            document.getElementById(\"step2\").classList.add(\"active\")\n            // Second click, show POI marker\n        } else if (!poimarker.getVisible()) {\n            poimarker.setPosition(event.latLng)\n            poimarker.setVisible(true)\n            los.setVisible(true)\n            document.getElementById(\"azimuth\").style.display = 'block'\n            tools.queryMatch(povmarker, poimarker)\n            document.getElementById(\"step2\").classList.remove(\"active\")\n            document.getElementById(\"step3\").classList.add(\"active\")\n        }\n    })\n\n    // Move markers event\n    for (const marker of [povmarker, poimarker]) {\n        google.maps.event.addDomListener(marker, 'position_changed', () => {\n            los.setPath([povmarker.getPosition(), poimarker.getPosition()])\n            let az = tools.getAzimuth(povmarker.getPosition(), poimarker.getPosition())\n            azimuthDOM.innerText = `${az.round(2)}ยบ`\n            // Clear results\n            resultsDOM.innerHTML = ''\n        })\n    }\n\n    // Query for a match on drop\n    for (const marker of [povmarker, poimarker]) {\n        google.maps.event.addDomListener(marker, 'dragend', () => {\n            tools.queryMatch(povmarker, poimarker)\n        })\n    }\n\n    // Reset button action\n    document.getElementById('reset').addEventListener('click', () => {\n        povmarker.setVisible(false)\n        poimarker.setVisible(false)\n        los.setVisible(false)\n        document.getElementById('step1').classList.add('active')\n        document.getElementById('step2').classList.remove('active')\n        document.getElementById('step3').classList.remove('active')\n        document.getElementById('azimuth').style.display = 'none'\n        document.getElementById('results').innerHTML = ''\n        window.location.hash = ''\n    })\n\n    // Setup map if vars passed in URL hash\n    let hash = tools.getHash()\n    if (hash.pov && hash.poi) {\n        // Parse locations from URL\n        let povpos = tools.strToLatLng(hash.pov)\n        let poipos = tools.strToLatLng(hash.poi)\n        // Move markers to locations\n        povmarker.setPosition(povpos)\n        poimarker.setPosition(poipos)\n        // Make elements visible\n        povmarker.setVisible(true)\n        poimarker.setVisible(true)\n        los.setVisible(true)\n        // Zoom map to fit both markers\n        let bounds = new google.maps.LatLngBounds()\n        bounds.extend(povpos)\n        bounds.extend(poipos)\n        map.fitBounds(bounds)\n        // Increment instruction steps\n        document.getElementById(\"step1\").classList.remove(\"active\")\n        document.getElementById(\"step3\").classList.add(\"active\")\n        document.getElementById(\"azimuth\").style.display = 'block'\n        // Finally call the backend\n        tools.queryMatch(povmarker, poimarker)\n    } else {\n        // Try HTML5 geolocation\n        // Do it only if no location in URL as asynchronous geoloc messes with fitBounds\n        tools.askGeolocation(map)\n    }\n}\n","import { Spinner } from 'spin.js'\n\n// extend Number object with methods for converting degrees / radians\ndeclare global {\n    interface Number {\n        toRad: () => number;\n        toDeg: () => number;\n        toBrng: () => number;\n        round: (decimals: number) => number;\n    }\n}\n\nexport function askGeolocation(map: google.maps.Map): void {\n    if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(\n            (position: Position) => {\n                let latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);\n                map.panTo(latlng)\n            }\n        )\n    }\n}\n\nexport function getAzimuth(pov: google.maps.LatLng, poi: google.maps.LatLng): number {\n    let povLat = pov.lat().toRad()\n    let poiLat = poi.lat().toRad()\n    let dLon = (poi.lng() - pov.lng()).toRad()\n    let y = Math.sin(dLon) * Math.cos(poiLat)\n    let x = Math.cos(povLat) * Math.sin(poiLat) - Math.sin(povLat) * Math.cos(poiLat) * Math.cos(dLon)\n    return Math.atan2(y, x).toBrng()\n}\n\n// Sets the marker positions in the URL\nexport function setHash(pov: google.maps.Marker, poi: google.maps.Marker): void {\n    let povpos = pov.getPosition().toUrlValue()\n    let poipos = poi.getPosition().toUrlValue()\n    window.location.hash = `pov=${povpos}&poi=${poipos}`\n}\n\n// Decode parameters from hash\nexport function getHash(): {pov: string, poi: string} {\n    // Remove # first character of hash that URLSearchParams does not support\n    const parser = new URLSearchParams(window.location.hash.substring(1))\n    return {\n        pov: parser.get('pov'),\n        poi: parser.get('poi')\n    }\n}\n\n// Make a Google Maps LatLng object from a string\nexport function strToLatLng(str: string) {\n    let coord = str.split(\",\")\n    return new google.maps.LatLng(+coord[0], +coord[1])\n}\n    \nexport function queryMatch(pov: google.maps.Marker, poi: google.maps.Marker) {\n    // Set the spinner\n    let spinner = new Spinner({\n        lines: 13, // The number of lines to draw\n\t\tlength: 7, // The length of each line\n\t\twidth: 4, // The line thickness\n\t\tradius: 10, // The radius of the inner circle\n\t\trotate: 0, // The rotation offset\n\t\tcolor: '#333', // #rgb or #rrggbb\n\t\tspeed: 1, // Rounds per second\n\t\tshadow: false, // Whether to render a shadow\n\t\tclassName: 'spinner', // The CSS class to assign to the spinner\n\t\tzIndex: 2e9, // The z - index(defaults to 2000000000)\n\t\ttop: '50%', // Top position relative to parent in px\n        left: '50%', // Left position relative to parent in px\n    }).spin(document.getElementById('results'))\n\n    // Log a request to Google Analytics\n    _gaq.push(['_trackEvent', 'Interaction', 'Request'])\n\n    let povlat = pov.getPosition().lat().round(1)\n    const results = document.getElementById('results')\n\n    window.fetch('/findMatch', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ lat: povlat, az: getAzimuth(pov.getPosition(), poi.getPosition()) })\n    })\n    .then(response => response.json())\n    .then(data => {\n        if (data.matches) {\n            // Create HTML for the result days list\n            const daylist = document.createElement('ul')\n            daylist.classList.add('matches')\n            for (const day of data.matches) {\n                const dayli = document.createElement('li')\n                dayli.innerText = day\n                daylist.append(dayli)\n            }\n            // Write the type(sunrise or sunset) and results to the screen\n            results.innerText = `${data.suntype} on:`\n            results.appendChild(daylist)\n            // Log the result to Google Analytics\n            _gaq.push(['_trackEvent', 'Interaction', 'Success', data.suntype])\n        } else {\n            results.innerText = `Sorry, there is no ${data.suntype} in this direction.`\n            _gaq.push(['_trackEvent', 'Interaction', 'Success', 'Out of Bounds'])\n        }\n    })\n    .then(() => {\n        spinner.stop()\n        setHash(pov, poi)\n    })\n    .catch((error) => {\n        results.innerText = \"ERROR in the Request.\"\n        // Log the error to Google Analytics\n        _gaq.push(['_trackEvent', 'Interaction', 'Error'])\n    })\n}\n\nNumber.prototype.toRad = function (): number { // convert degrees to radians\n    return this * Math.PI / 180;\n}\n\nNumber.prototype.toDeg = function (): number { // convert radians to degrees(signed)\n    return this * 180 / Math.PI;\n}\n\nNumber.prototype.toBrng = function (): number { // convert radians to degrees(as bearing: 0...360)\n    return (this.toDeg() + 360) % 360;\n}\n\nNumber.prototype.round = function (decimals: number): number {\n    return Math.round(this * Math.pow(10, decimals)) / Math.pow(10, decimals)\n}\t\n","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar defaults = {\r\n    lines: 12,\r\n    length: 7,\r\n    width: 5,\r\n    radius: 10,\r\n    scale: 1.0,\r\n    corners: 1,\r\n    color: '#000',\r\n    fadeColor: 'transparent',\r\n    animation: 'spinner-line-fade-default',\r\n    rotate: 0,\r\n    direction: 1,\r\n    speed: 1,\r\n    zIndex: 2e9,\r\n    className: 'spinner',\r\n    top: '50%',\r\n    left: '50%',\r\n    shadow: '0 0 1px transparent',\r\n    position: 'absolute',\r\n};\r\nvar Spinner = /** @class */ (function () {\r\n    function Spinner(opts) {\r\n        if (opts === void 0) { opts = {}; }\r\n        this.opts = __assign(__assign({}, defaults), opts);\r\n    }\r\n    /**\r\n     * Adds the spinner to the given target element. If this instance is already\r\n     * spinning, it is automatically removed from its previous target by calling\r\n     * stop() internally.\r\n     */\r\n    Spinner.prototype.spin = function (target) {\r\n        this.stop();\r\n        this.el = document.createElement('div');\r\n        this.el.className = this.opts.className;\r\n        this.el.setAttribute('role', 'progressbar');\r\n        css(this.el, {\r\n            position: this.opts.position,\r\n            width: 0,\r\n            zIndex: this.opts.zIndex,\r\n            left: this.opts.left,\r\n            top: this.opts.top,\r\n            transform: \"scale(\" + this.opts.scale + \")\",\r\n        });\r\n        if (target) {\r\n            target.insertBefore(this.el, target.firstChild || null);\r\n        }\r\n        drawLines(this.el, this.opts);\r\n        return this;\r\n    };\r\n    /**\r\n     * Stops and removes the Spinner.\r\n     * Stopped spinners may be reused by calling spin() again.\r\n     */\r\n    Spinner.prototype.stop = function () {\r\n        if (this.el) {\r\n            if (typeof requestAnimationFrame !== 'undefined') {\r\n                cancelAnimationFrame(this.animateId);\r\n            }\r\n            else {\r\n                clearTimeout(this.animateId);\r\n            }\r\n            if (this.el.parentNode) {\r\n                this.el.parentNode.removeChild(this.el);\r\n            }\r\n            this.el = undefined;\r\n        }\r\n        return this;\r\n    };\r\n    return Spinner;\r\n}());\r\nexport { Spinner };\r\n/**\r\n * Sets multiple style properties at once.\r\n */\r\nfunction css(el, props) {\r\n    for (var prop in props) {\r\n        el.style[prop] = props[prop];\r\n    }\r\n    return el;\r\n}\r\n/**\r\n * Returns the line color from the given string or array.\r\n */\r\nfunction getColor(color, idx) {\r\n    return typeof color == 'string' ? color : color[idx % color.length];\r\n}\r\n/**\r\n * Internal method that draws the individual lines.\r\n */\r\nfunction drawLines(el, opts) {\r\n    var borderRadius = (Math.round(opts.corners * opts.width * 500) / 1000) + 'px';\r\n    var shadow = 'none';\r\n    if (opts.shadow === true) {\r\n        shadow = '0 2px 4px #000'; // default shadow\r\n    }\r\n    else if (typeof opts.shadow === 'string') {\r\n        shadow = opts.shadow;\r\n    }\r\n    var shadows = parseBoxShadow(shadow);\r\n    for (var i = 0; i < opts.lines; i++) {\r\n        var degrees = ~~(360 / opts.lines * i + opts.rotate);\r\n        var backgroundLine = css(document.createElement('div'), {\r\n            position: 'absolute',\r\n            top: -opts.width / 2 + \"px\",\r\n            width: (opts.length + opts.width) + 'px',\r\n            height: opts.width + 'px',\r\n            background: getColor(opts.fadeColor, i),\r\n            borderRadius: borderRadius,\r\n            transformOrigin: 'left',\r\n            transform: \"rotate(\" + degrees + \"deg) translateX(\" + opts.radius + \"px)\",\r\n        });\r\n        var delay = i * opts.direction / opts.lines / opts.speed;\r\n        delay -= 1 / opts.speed; // so initial animation state will include trail\r\n        var line = css(document.createElement('div'), {\r\n            width: '100%',\r\n            height: '100%',\r\n            background: getColor(opts.color, i),\r\n            borderRadius: borderRadius,\r\n            boxShadow: normalizeShadow(shadows, degrees),\r\n            animation: 1 / opts.speed + \"s linear \" + delay + \"s infinite \" + opts.animation,\r\n        });\r\n        backgroundLine.appendChild(line);\r\n        el.appendChild(backgroundLine);\r\n    }\r\n}\r\nfunction parseBoxShadow(boxShadow) {\r\n    var regex = /^\\s*([a-zA-Z]+\\s+)?(-?\\d+(\\.\\d+)?)([a-zA-Z]*)\\s+(-?\\d+(\\.\\d+)?)([a-zA-Z]*)(.*)$/;\r\n    var shadows = [];\r\n    for (var _i = 0, _a = boxShadow.split(','); _i < _a.length; _i++) {\r\n        var shadow = _a[_i];\r\n        var matches = shadow.match(regex);\r\n        if (matches === null) {\r\n            continue; // invalid syntax\r\n        }\r\n        var x = +matches[2];\r\n        var y = +matches[5];\r\n        var xUnits = matches[4];\r\n        var yUnits = matches[7];\r\n        if (x === 0 && !xUnits) {\r\n            xUnits = yUnits;\r\n        }\r\n        if (y === 0 && !yUnits) {\r\n            yUnits = xUnits;\r\n        }\r\n        if (xUnits !== yUnits) {\r\n            continue; // units must match to use as coordinates\r\n        }\r\n        shadows.push({\r\n            prefix: matches[1] || '',\r\n            x: x,\r\n            y: y,\r\n            xUnits: xUnits,\r\n            yUnits: yUnits,\r\n            end: matches[8],\r\n        });\r\n    }\r\n    return shadows;\r\n}\r\n/**\r\n * Modify box-shadow x/y offsets to counteract rotation\r\n */\r\nfunction normalizeShadow(shadows, degrees) {\r\n    var normalized = [];\r\n    for (var _i = 0, shadows_1 = shadows; _i < shadows_1.length; _i++) {\r\n        var shadow = shadows_1[_i];\r\n        var xy = convertOffset(shadow.x, shadow.y, degrees);\r\n        normalized.push(shadow.prefix + xy[0] + shadow.xUnits + ' ' + xy[1] + shadow.yUnits + shadow.end);\r\n    }\r\n    return normalized.join(', ');\r\n}\r\nfunction convertOffset(x, y, degrees) {\r\n    var radians = degrees * Math.PI / 180;\r\n    var sin = Math.sin(radians);\r\n    var cos = Math.cos(radians);\r\n    return [\r\n        Math.round((x * cos + y * sin) * 1000) / 1000,\r\n        Math.round((-x * sin + y * cos) * 1000) / 1000,\r\n    ];\r\n}\r\n"],"sourceRoot":""}